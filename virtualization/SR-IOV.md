# SR-IOV

> [SR-IOV是什么?](https://zhuanlan.zhihu.com/p/91197211)

SR-IOV 是`Single Root I/O Virtualization`的缩写。SR-IOV是虚拟化的一个重要功能。<mark>启用SR-IOV的这个功能，将大大减轻宿主机的CPU负荷，提高网络性能，降低网络时延等</mark>。

在虚拟机中，一切皆虚拟。比如网卡，虚拟机看来好像有一个真实网卡，但是这个网卡是宿主机虚拟出来的硬件，也就是一堆软件代码而已，没有真实硬件。

虚拟虽然万能，但是很显然，这一堆代码是需要CPU去执行的！所以，虚拟设备的性能会随着宿主机的性能而改变，另外宿主机由于需要进行数据处理，时延等也产生了。

我们之前也提到过，VT-D这个功能可以将物理的PCI-e设备直接分配给虚拟机，让虚拟机直接控制硬件，那么就可以避开上述的问题。但是，虚拟机会独占这个直通的PCI-e设备，一台宿主机可能有成百上千个虚拟机，如果每个虚拟机都给直通一个PCI-e设备，比如网卡，那么该造什么样的主机？拥有100个物理网卡的主机？想象一下也是不太可能。

为了解决这个问题，Intel提出来SR-IOV这个东西。SR-IOV最初应用在网卡上。简单的说，就是一个物理网卡可以虚拟出来多个轻量化的PCI-e物理设备，从而可以分配给虚拟机使用。