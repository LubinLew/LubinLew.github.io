# 负载均衡

> [面试官：说说你知道的几种负载均衡分类-极客时间](https://time.geekbang.org/column/article/265558)

负载均衡建立在现有网络结构之上，它提供了一种廉价有效透明的方法扩展网络设备和服务器的带宽、增加吞吐量、加强网络数据处理能力、提高网络的灵活性和可用性。

## 负载分类

负载均衡常见的种类有：软件负载均衡、硬件负载均衡、DNS负载均衡。

### DNS 负载均衡

DNS 负载均衡技术也叫做智能DNS。其原理是在 DNS 服务器中为同一个主机名配置多个 IP 地址，因为 DNS 解析同一个域名可以返回不同的 IP，可以根据用户的IP选择离用户最近机房的IP返回；或者根据用户的ISP选择联通或者电信的机房，这样将客户端的访问引导到不同的机器上去，使得不同的客户端访问不同的服务器，从而达到负载均衡的目的。DNS 负载均衡的优点是简单，而且就近访问可以减少响应时间，提升访问速度。这适用于多机房异地部署的情况。



### 硬件负载均衡

硬件负载均衡解决方案是直接在服务器和外部网络间安装负载均衡设备，常见的硬件有 F5、A10。优点：功能强大，支持全局负载均衡提供全面的复杂均衡算法。高性能，支持百万以上的并发。提供安全功能，例如防火墙、防 DDOS 攻击等。缺点是贵，而且扩展能力差，当访问量突增的时候，超过限度就不能动态扩容了。



### 软件负载均衡

软件负载均衡是最常见的，大小公司都需要用到它。软件负载均衡是通过负载均衡功能的软件来实现负载均衡，常见的软件有 LVS、Nginx、HAProxy。软件负载均衡又分四层和七层负载均衡，四层负载均衡就是在网络层利用 IP 地址端口进行请求的转发，基本上就是起个转发分配作用。而七层负载均衡就是可以根据访问用户的 HTTP 请求头、URL 信息将请求转发到特定的主机。 LVS 为四层负载均衡，Nginx、HAProxy 可以是四层，也可以是七层。软件负载均衡的优点在于便宜、简单灵活，配置也很简单。对于小型企业或者并发量不高的企业来说就够用了，在高峰期也容易扩容。缺点在于，它和硬件负载均衡相比，性能一般。支撑不起来大流量的企业，也没有防火墙或防DDOS 攻击等安全性功能。



## 常用负载均衡算法

- [轮循/加权轮循](network/load_balance/round_robin.md)

- [随机/加权随机](network/load_balance/random.md)

- [最少连接数/加权最少连接数](network/load_balance/least_connect.md)

- [源IP哈希](network/load_balance/ip_hash.md)


